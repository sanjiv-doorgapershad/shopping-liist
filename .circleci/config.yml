version: 2
jobs:
  validate:
    docker:
        - image: circleci/node:10-browsers
    steps:
        - checkout
        - restore_cache:
            key: AngularCircleCI-{{ .Branch }}-{{ checksum "package.json" }}
        - run: 
            name: install-npm
            command: npm install
        - save_cache:
            key: AngularCircleCI-{{ .Branch }}-{{ checksum "package.json" }}
            paths:
                - "./node_modules"
        - run: 
            name: test
            command: npm run test-headless
        - store_artifacts:
            path: coverage
            prefix: coverage
        - run: 
            name: lint
            command: npm run lint